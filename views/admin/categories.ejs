<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Categories</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/public/style.css">
</head>
<body class="bg-gray-100">
    <%- include('../partials/admin-header') %>
    <main class="container mx-auto p-6">
        <h1 class="text-3xl font-bold mb-6">Manage Categories</h1>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="md:col-span-1">
                <form action="/admin/categories" method="POST" class="card">
                    <h2 class="text-xl font-semibold mb-4">New Category</h2>
                    <div class="mb-4">
                        <label for="name" class="form-label">Name</label>
                        <input type="text" id="name" name="name" required class="form-input">
                    </div>
                    <div class="mb-4">
                        <label for="slug" class="form-label">Slug</label>
                        <input type="text" id="slug" name="slug" required class="form-input">
                    </div>
                    <button type="submit" class="btn-primary w-full">Create</button>
                </form>
            </div>
            <div class="md:col-span-2 card">
                <h2 class="text-xl font-semibold mb-4">Existing Categories</h2>
                <ul class="space-y-2">
                    <% categories.forEach(cat => { %>
                        <li class="flex justify-between items-center p-2 rounded-md hover:bg-gray-100">
                            <span><%= cat.name %> (<%= cat.slug %>)</span>
                            <form action="/admin/categories/delete/<%= cat.id %>" method="POST" onsubmit="return confirm('Are you sure?');">
                                <button type="submit" class="text-red-500 hover:text-red-700">Delete</button>
                            </form>
                        </li>
                    <% }) %>
                </ul>
            </div>
        </div>
    </main>
    <script>
        document.getElementById('name').addEventListener('input', (e) => {
            document.getElementById('slug').value = e.target.value.toLowerCase().trim().replace(/\s+/g, '-').replace(/[^\w-]+/g, '');
        });
    </script>
</body>
</html>